# Описание:

## МОДУЛЬ: Django
- ДОМАШНЕЕ ЗАДАНИЕ 28: Права доступа
feature/28

## ДЗ28
### Работа с группой
- Создана группа «Модератор продуктов».
- У модели продукта добавлено право на отмену публикации продукта.
- Для группы «Модератор продуктов» настроено право на отмену публикации продукта.
- Для группы «Модератор продуктов» настроено право на удаление любого продукта.
- Проверяется наличие прав у пользователя при попытке отменить публикацию или удалить продукт.
- Приложена фикстура с группами или реализована команда для заполнения групп с настроенными правами в БД.

### Владельцы продуктов
- Добавлено поле владельца к модели продукта.
- Поле владельца связано с моделью пользователя через ForeignKey.
- При создании нового продукта поле owner автоматически заполняется текущим авторизованным пользователем.
- Реализована проверка прав доступа в представлениях для редактирования и удаления продуктов, чтобы только владелец мог выполнять эти действия.
- При запросе удаления проверяется дополнительно наличие группы модератора у пользователя.

## ДЗ27
### Задание 1
- Создайте новое приложение для работы с пользователями в вашем проекте Django.
- Определите модель пользователя с использованием AbstractUser, задав электронную почту как поле для авторизации.
- Добавьте дополнительные поля в модель пользователя: аватар (изображение), номер телефона, страна.

### Задание 2
В сервисе реализуйте функцию аутентификации, а именно:
- Регистрация пользователя:
- Создайте форму для регистрации пользователя с полями электронной почты и пароля.
- Добавьте логику регистрации в представлении, позволяя пользователю создать учетную запись.
- Реализуйте отправку приветственного письма пользователю после регистрации.
- Авторизация пользователя:
- Настройте форму и представление для авторизации пользователя по электронной почте и паролю.

### Задание 3
- Закройте доступ к страницам, связанным с управлением продуктами, для анонимных пользователей. 
- Убедитесь, что только авторизованные пользователи могут просматривать, создавать, изменять и удалять продукты. 
- Общедоступной должна остаться только страница просмотра списка товаров.

## ДЗ26.1
### Задание 1
- Реализуйте механизм CRUD для модели продуктов, используя модуль django.forms. 
- При этом необходимо обезопасить сайт от спама и не разрешать присваивать продуктам названия и добавлять в описание слова, которые включены в список запрещенных слов.
- Реализуйте валидацию формы, чтобы проверять отсутствие этих слов (в любом регистре) в данных полях.
- Запрещенные слова, которые нельзя использовать в названиях и описаниях продуктов:

### Задание 2
- Добавьте кастомную валидацию для поля price в форме создания и редактирования продуктов. 
- Валидация должна проверять, что цена продукта не может быть отрицательной. 
- Реализуйте это с использованием метода clean_price в форме. 
- Если цена введена неправильно, отобразите соответствующее сообщение пользователю.

### Задание 3
- Добавьте стилизацию форм для продуктов, используя метод __init__. 
- Убедитесь, что формы соответствуют общей стилистике платформы.

## ДЗ25
### Задание 1
- Переведите имеющиеся в проекте контроллеры с FBV на CBV.

### Задание 2
- Создайте новое приложение для блога и добавьте его в файл settings.py.
- Создайте новую модель блоговой записи со следующими полями:
- заголовок,
- содержимое,
- превью (изображение),
- дата создания,
- признак публикации (булевое поле),
- количество просмотров.
- Для работы с блогом реализуйте полный CRUD для новой модели, используя CBV.

### Задание 3
- Модифицируйте вывод и обработку запросов, добавив следующую логику на уровне контроллеров:
- увеличение счетчика просмотров: при открытии отдельной статьи увеличивать счетчик просмотров.
- фильтрация опубликованных статей: выводить в список статей только те, которые имеют положительный признак публикации.
- перенаправление после редактирования: после успешного редактирования записи необходимо перенаправлять пользователя на просмотр этой статьи.

### * Дополнительное задание
- Реализуйте механизм, при котором пользователи могут загружать изображения продуктов. 
- Добавьте валидацию для поля загрузки изображения, чтобы проверить формат и размер загружаемого файла. 
- Убедитесь, что загружаемые файлы имеют формат JPEG или PNG и не превышают размер 5 МБ.

## ДЗ24
### Задание 1 
Создайте новый контроллер и шаблон для отображения страницы с подробной информацией о товаре. На этой странице должна быть показана вся информация о товаре.

### Задание 2
Добавьте в шаблон главной страницы код для отображения списка товаров с помощью цикла. Чтобы карточки товаров выглядели одинаково, обрежьте отображаемое описание до первых 100 символов.

### Задание 3
Из-за увеличения количества шаблонов возникает много повторяющегося кода. Выделите общий (базовый) шаблон, который будет включать общие элементы страницы, такие как шапка, подвал и стили. Также создайте подшаблон для главного меню, который можно будет включать в другие шаблоны.

## ДЗ23
### Вы продолжаете работу над проектом. Вам предстоит:
- подключить PostgreSQL к проекту, 
- создать и настроить модели Product и Category, 
- перенести их в базу данных с помощью миграций, 
- зарегистрировать и настроить модели в админке, 
- наполнить базу данных через Django shell, 
- создать фикстуры для моделей 
- и реализовать кастомную команду для добавления тестовых данных.

### Базовые настройки проекта
- В проекте есть файл с зависимостями.
- Создан Django-проект.
- Создано приложение catalog.
- Приложение catalog зарегистрировано в INSTALLED_APPS.
- Создан файл urls.py в приложении catalog.
### Функциональность проекта
- Создан HTML-шаблон Главной страницы.
- Создан HTML-шаблон страницы Контакты.
- Элементы в шаблонах расположены упорядоченно.
- Стили в шаблонах отображаются корректно.
- Контроллер рендерит шаблон главной страницы функцией render.
- Контроллер рендерит шаблон страницы контактов функцией render.
- В контроллерах корректно указаны пути к шаблонам.
- Контроллер главной страницы зарегистрирован на адрес /.
- Контроллер страницы контактов зарегистрирован на адрес 
contacts/.
- В основном URL-файле использован include для подключения URL-файла приложения catalog.
- Все URL-адреса в проекте заканчиваются на /.

### Дополнительно
- Реализована форма обратной связи на странице контактов.
- Настроена обработка данных формы в контроллере, чтобы отображать сообщение об успешной отправке данных.

## Содержит функции:
модуль [views.py](catalog%2Fviews.py)catalog/views.py

def home(request):

    return render(request, 'home.html')


def contacts(request):

    # return render(request, 'contacts.html')
    if request.method == "POST":
        name = request.POST.get("name")
        phone = request.POST.get("phone")
        message = request.POST.get("message")

        return HttpResponse(f"Спасибо, {name}! \
            Ваш телефон: {phone}. \
            Сообщение получено: {message}.")

    return render(request, 'contacts.html')

## Установка:
1. Клонируйте репозиторий:
```
git clone https://github.com/kirillgladkikh/dz22v2.git
```
2. Зависимости указаны в файле [pyproject.toml](pyproject.toml).
3. Для установки всех зависимостей из pyproject.toml используйте:
```
poetry install
```

## Использование:
1. Запустите сервер командой:
```
python manage.py runserver
```
2. перейдите по ссылке:
```
http://127.0.0.1:8000/
```

## Документация:
Настоящий файл [README.md](README.md).

## Лицензия:
Проект распространяется под [лицензией MIT](LICENSE). 
